# ЛР №2
### Условие задачи


**Дано:**
- симуляционная модель [**boids**](https://www.red3d.com/cwr/boids/)
    - состоит из набора агентов
    - агенты взаимодействуют только с локальными соседями (в радиусе видимости)
    - три типа взаимодействия между агентами:
        - **alignment** (выравнивание вектора скорости по локальным соседям)
        - **cohesion** (стремление в геометрический центр локальных соседей)
        - **separaion** (избегание локального перенаселения)
    - взаимодействие агентов с границами
    - шум, символизирующий множество неучтенных факторов
    - величина итогового взаимодействия получается смешиванием всех взаимодействий с весами:
        - $a, b, c, d, e$
- модули `vispy`, `numpy`, `numba`


**Требуется:**
- реализовать алгоритм эволюции модели **boids** во времени
- используя модуль `vispy` создать окно и реализовать визуализацию модели
    - также выводить в окне текст:
        - количество агентов
        - значения параметров - $a, b, c, d, e$
        - частоту кадров (fps)
- внести изменения в функции расчета взаимодействий таким образом, чтобы:
    - взаимодействия качественно не меняли свой смысл (т.е. separation должно исходить из цели избегания локального перенаселения)
    - отличались от реализованных на семинарах
- **в комментариях и докстрингах описать, где и какие изменения были сделани, их смысл**
- применить компиляцию `@njit` из модуля `numba` с использованием распараллеливания
- для **трех** различных нетривиальных типов поведения подобрать параметры - $a, b, c, d, e$
- выполнить вычисления для количества агентов $N_1 = 100$, $N_2 = 1000$, $N_3 = 5000$ и найденных типов поведения
    - для 1800 - 3600 временных шагов
- создать видеоролики, демонстрирующие эволюцию системы (например, при момощи помощи `ffmpeg-python`):
    - для каждого $N_i$
    - для каждого типа поведения
    - длительностью 30 с - 1 мин
    - частота кадров - 60 к/с
- задокументировать функции


**Материалы:**
- [boids](https://www.red3d.com/cwr/boids/)
- [Coding Challenge #124: Flocking Simulation](https://www.youtube.com/watch?v=mhjuuHl6qHM&t=1s)
- [FFMPEG](https://ffmpeg.org/)
- [ffmpeg-python](https://pypi.org/project/ffmpeg-python/)


**Рекомендации:**
- использовать IDE **Pycharm** (полная версия для студентов и преподавателей)
- в качестве бекэнда для `vispy` использовать кроссплатформенный модуль `pyglet`


**Правила оценивания:**

- оценка за корректно выполненный расчет для каждого значения $N_i$ и количества реализованных типов поведения $k$, баллов из 100:
```
    Ni    =  100, 1000, 5000
    g(Ni) =    5,   45,   50

    k     =    1,    2,    3
    g(k)  =    5,   45,   50
```
    
- штрафы $p(i)$, баллов:
    - нет видеороликов - 50
    - на видео нет текста (количество агентов, ...) - 20
    - нет документации функций - 20
    - не описаны изменения функций расчета взаимодействий - 20
    - менее значимые недоработки - 10


- итоговая оценка за задание = $\max \left( 0, 0.7 \cdot \sum_{i=1}^{3}{g(N_i)} + 0.3 \cdot \sum_{k=1}^{3}{g(k)} - \sum_{i}{p(i)} \right)$
